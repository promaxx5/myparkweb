<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head}"></head>

<body>

<div th:replace="~{fragments/navbar :: navbar}"></div>

<main class="container">

    <div style="margin-bottom: 30px;">
        <hgroup>
            <h1>–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞—Ä–∫–æ–≤–∫–∏</h1>
            <p>–í—ã–±–µ—Ä–∏—Ç–µ —É–¥–æ–±–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –≤–∞—à–µ–≥–æ –∞–≤—Ç–æ–º–æ–±–∏–ª—è</p>
        </hgroup>

        <form action="/parkings" method="get" style="display: flex; gap: 10px;">
            <input type="search" name="search" th:value="${search}" placeholder="–ü–æ–∏—Å–∫ –ø–æ –∞–¥—Ä–µ—Å—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –õ–µ–Ω–∏–Ω–∞)..." style="margin-bottom: 0;">
            <button type="submit" class="contrast" style="width: auto;">–ù–∞–π—Ç–∏</button>
        </form>
    </div>

    <div th:if="${!parkings.empty}">

        <div class="grid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">

            <article th:each="p : ${parkings}" style="padding: 0; overflow: hidden; border: 1px solid #2d3748; border-radius: 8px; display: flex; flex-direction: column;">

                <div style="background-color: #1e262e; padding: 15px; border-bottom: 1px solid #2d3748;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <span style="background: #e2e8f0; color: #333; font-size: 0.75rem; padding: 2px 8px; border-radius: 4px; font-weight: bold;">
                            <span th:text="${p.parkingType}">–¢–∏–ø</span>
                        </span>
                        <strong style="color: #ff9800;" th:text="${p.averageRating != null and p.averageRating > 0 ? '‚≠ê ' + p.averageRating : '‚≠ê New'}">5.0</strong>
                    </div>
                </div>

                <div style="padding: 15px; display: flex; flex-direction: column; flex-grow: 1;">
                    <h4 th:text="${p.name}" style="margin-bottom: 5px; font-size: 1.1rem;">–ù–∞–∑–≤–∞–Ω–∏–µ</h4>
                    <small style="color: #a0aec0; display: block; margin-bottom: 20px; flex-grow: 1;" th:text="${p.address}">–ê–¥—Ä–µ—Å</small>

                    <div style="display: flex; justify-content: space-between; align-items: flex-end; border-top: 1px dashed #2d3748; padding-top: 15px;">
                        <div>
                            <strong style="font-size: 1.2rem; color: #1095c1;" th:text="${p.pricePerHour}">100</strong>
                            <small style="color: gray;">‚ÇΩ / —á–∞—Å</small>
                        </div>
                        <a th:href="@{/parkings/{id}(id=${p.id})}" role="button" class="outline" style="padding: 6px 20px; font-size: 0.9rem; border-radius: 20px;">
                            –í—ã–±—Ä–∞—Ç—å
                        </a>
                    </div>
                </div>
            </article>
        </div>

        <div style="margin-top: 50px; display: flex; justify-content: center; gap: 15px; align-items: center;">

            <a th:href="@{/parkings(page=${currentPage - 1}, search=${search})}"
               role="button"
               class="outline secondary"
               th:if="${currentPage > 0}">
                ‚Üê –ù–∞–∑–∞–¥
            </a>
            <button disabled class="outline secondary" th:unless="${currentPage > 0}" style="opacity: 0.3; cursor: not-allowed;">‚Üê –ù–∞–∑–∞–¥</button>

            <small style="color: gray; font-weight: bold;">
                –°—Ç—Ä–∞–Ω–∏—Ü–∞ <span th:text="${currentPage + 1}" style="color: white;">1</span> –∏–∑ <span th:text="${totalPages}">10</span>
            </small>

            <a th:href="@{/parkings(page=${currentPage + 1}, search=${search})}"
               role="button"
               class="outline secondary"
               th:if="${currentPage + 1 < totalPages}">
                –í–ø–µ—Ä–µ–¥ ‚Üí
            </a>
            <button disabled class="outline secondary" th:unless="${currentPage + 1 < totalPages}" style="opacity: 0.3; cursor: not-allowed;">–í–ø–µ—Ä–µ–¥ ‚Üí</button>

        </div>

    </div>

    <div th:if="${parkings.empty}" style="text-align: center; padding: 60px 20px; border: 2px dashed #333; border-radius: 10px; margin-top: 20px;">
        <h3 style="margin-bottom: 10px;">üòî –ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</h3>
        <p style="color: gray;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞ –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä.</p>
        <a href="/parkings" role="button" class="secondary outline">–°–±—Ä–æ—Å–∏—Ç—å –ø–æ–∏—Å–∫</a>
    </div>

</main>

<footer th:replace="~{fragments/footer :: footer}"></footer>

</body>
</html>